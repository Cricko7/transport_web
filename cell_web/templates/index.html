<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Транспортная телефонная сеть</title>
    <link rel="stylesheet" href="./static/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="./static/script.js" defer></script>
</head>
<body>
    <header>
        <h1>Управление транспортной телефонной сетью</h1>
    </header>
    <main>
        <div id="map" style="height: 400px;"></div>
        <div id="controls">
            <h2>Добавить станцию</h2>
            <form id="station-form">
                <label for="frequency">Частота:</label>
                <input type="text" id="frequency" required>
                <label for="location">Расположение:</label>
                <input type="text" id="location" required>
                <label for="latitude">Широта:</label>
                <input type="number" id="latitude" step="any" required>
                <label for="longitude">Долгота:</label>
                <input type="number" id="longitude" step="any" required>
                <button type="submit">Добавить станцию</button>
            </form>
            <h2>Список станций</h2>
            <ul id="station-list"></ul>
        </div>
    </main>

    <script>
      // Инициализация карты Leaflet
      const map = L.map('map').setView([55.751244, 37.618423], 10); // Координаты Москвы

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '© OpenStreetMap'
      }).addTo(map);
      
      // Загрузка станций и добавление маркеров на карту
      fetch('/stations')
          .then(response => response.json())
          .then(stations => {
              stations.forEach(station => {
                  const [frequency, location, latitude, longitude] = station;
                  L.marker([latitude, longitude]).addTo(map)
                      .bindPopup(`Частота: ${frequency}<br>Расположение: ${location}`);
              });
          });
    </script>

</body>
</html>
